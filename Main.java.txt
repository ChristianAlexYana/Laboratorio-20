import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class Main {
    public static void main(String[] args) {
        Random random = new Random();
        List<Soldado> ejercito1 = generarEjercito("Ejército 1", random);
        List<Soldado> ejercito2 = generarEjercito("Ejército 2", random);

        mostrarEjercito("Ejército 1", ejercito1);
        mostrarEjercito("Ejército 2", ejercito2);

        simularBatalla(ejercito1, ejercito2);
    }

    public static List<Soldado> generarEjercito(String nombreEjercito, Random random) {
        List<Soldado> ejercito = new ArrayList<>();
        int n = random.nextInt(10) + 1; 

        for (int i = 0; i < n; i++) {
            String nombre = nombreEjercito + "Soldado" + (i + 1);
            int tipo = random.nextInt(4); 

            switch (tipo) {
                case 0 -> ejercito.add(new Espadachin(nombre, random.nextInt(2) + 3, random.nextInt(10), random.nextInt(10), random.nextDouble() * 1.5 + 0.5));
                case 1 -> ejercito.add(new Arquero(nombre, random.nextInt(3) + 1, random.nextInt(10), random.nextInt(10), random.nextInt(10) + 5));
                case 2 -> ejercito.add(new Caballero(nombre, random.nextInt(3) + 3, random.nextInt(10), random.nextInt(10), random.nextBoolean()));
                case 3 -> ejercito.add(new Lancero(nombre, random.nextInt(2) + 1, random.nextInt(10), random.nextInt(10), random.nextDouble() * 2 + 1));
            }
        }

        return ejercito;
    }

    public static void mostrarEjercito(String nombre, List<Soldado> ejercito) {
        System.out.println(nombre + ":");
        ejercito.forEach(System.out::println);
    }

    public static void simularBatalla(List<Soldado> ejercito1, List<Soldado> ejercito2) {
        int vidaTotal1 = ejercito1.stream().mapToInt(Soldado::getPuntosVida).sum();
        int vidaTotal2 = ejercito2.stream().mapToInt(Soldado::getPuntosVida).sum();

        System.out.println("Vida total del Ejército 1: " + vidaTotal1);
        System.out.println("Vida total del Ejército 2: " + vidaTotal2);

        String ganador = vidaTotal1 > vidaTotal2 ? "Ejército 1" : "Ejército 2";
        System.out.println("¡El ganador es " + ganador + "!");
    }
}
